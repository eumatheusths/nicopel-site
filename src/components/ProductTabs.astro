---
// src/components/ProductTabs.astro

const products = [
  {
    id: "potes",
    label: "Potes de Papel",
    title: "Potes de Papel",
    // Texto atualizado conforme imagem de referência
    description: "Tamanhos 80, 100, 120, 150, 180, 240, 360, 480, 500 e 1000ml.",
    features: [
      "Próprio para contato direto com o alimento e compatível com refrigeração e/ou congelamento.",
      "Produzido com papel cartão triplex certificado.",
      "Biodegradável: solução sustentável com decomposição eficiente.",
      "Pedido mínimo: 1.000 un. (em branco) 6.000 un. (personalizados)."
    ],
    // Caminho atualizado conforme sua pasta public
    image: "/pote.webp" 
  },
  {
    id: "copos",
    label: "Copos de Papel",
    title: "Copos de Papel Premium",
    description: "Tamanhos 100ml, 200ml, 400ml e 500ml.",
    features: [
      "Mantém a temperatura da bebida por mais tempo",
      "Ideal para café, chás, sucos e refrigerantes",
      "Papel de alta gramatura que não amolece",
      "Opção com ou sem tampa (bico ou reta)",
      "Impressão fotográfica de alta definição"
    ],
    image: "/copos.webp"
  },
  {
    id: "sorvete",
    label: "Caixas de Sorvete",
    title: "Embalagens para Sorvete",
    description: "Formatos variados para caixas de sorvete de 5L, 7L e 10L.",
    features: [
      "Barreira contra umidade reforçada",
      "Suporta congelamento extremo sem deformar",
      "Design que facilita o empilhamento no freezer",
      "Material 100% reciclável e seguro",
      "Personalização total da área externa"
    ],
    // Atenção: Mantive o nome exato do arquivo (com erro de digitação e espaço) para funcionar
    image: "/cx sorvte.webp"
  },
  {
    id: "pizza",
    label: "Caixas de Pizza",
    title: "Caixas de Pizza Oitavadas",
    description: "Disponível nos tamanhos 25cm, 30cm, 35cm, 40cm e Gigante.",
    features: [
      "Fundo de alta qualidade que valoriza o produto",
      "Respiros estratégicos para manter a crocância",
      "Fechamento seguro e fácil de montar",
      "Papelão ondulado de alta resistência térmica",
      "Impressão fotográfica na tampa "
    ],
    image: "/pizza.webp"
  },
  {
    id: "delivery",
    label: "Embalagens para Delivery",
    title: "Linha Delivery Food",
    description: "Caixas para hambúrguer, batata, combos e comida oriental.",
    features: [
      "Sistema antivazamento (Gordura Zero)",
      "Travas de segurança para o transporte",
      "Montagem rápida (Fundo automático)",
      "Diversos formatos para lanches e porções",
      "Excelente apresentação para o cliente final"
    ],
    image: "/delivery-1-1.webp"
  },
  {
    id: "industrial",
    label: "Embalagens Industriais",
    title: "Soluções para Indústria",
    description: "Desenvolvimento técnico para linhas de produção automatizadas.",
    features: [
      "Alta precisão de corte e vinco",
      "Materiais específicos para cada setor",
      "Projetos sob medida (Engenharia de embalagem)",
      "Testes de resistência e stackability",
      "Logística otimizada em paletes"
    ],
    image: "/industrial-1.webp"
  },
  {
    id: "acessorios",
    label: "Acessórios",
    title: "Acessórios Complementares",
    description: "Tudo o que você precisa para completar a experiência.",
    features: [
      "Tampas plásticas e de papel",
      "Porta-copos e luvas térmicas (sleeve)",
      "Canudos biodegradáveis embalados",
      "Cintas para lacre de segurança",
      "Guardanapos personalizados"
    ],
    image: "/acessorios.webp"
  }
];
---

<section class="py-24 bg-white" id="catalogo">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    
    <div class="mb-16 text-center lg:text-left">
      <span class="inline-block py-1 px-3 rounded-full bg-[#B8E900]/20 text-black text-xs font-bold tracking-wider uppercase mb-4">
        CATÁLOGO COMPLETO
      </span>
      <h2 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4">
        Detalhes Técnicos
      </h2>
      <p class="text-gray-500 text-lg max-w-2xl">
        Explore as especificações de cada linha de produtos Nicopel.
      </p>
    </div>

    <div class="grid lg:grid-cols-12 gap-8 lg:gap-12">
      
      <div class="lg:col-span-4 flex flex-col space-y-2">
        {products.map((product, index) => (
          <button
            class={`tab-btn w-full text-left px-6 py-4 rounded-xl font-bold transition-all duration-300 flex items-center justify-between group
              ${index === 0 
                ? 'bg-[#B8E900] text-black shadow-lg shadow-[#B8E900]/20 scale-[1.02]' 
                : 'bg-gray-50 text-gray-600 hover:bg-gray-100 hover:text-black'
              }`}
            data-target={product.id}
            onclick={`openTab('${product.id}')`}
          >
            {product.label}
            <svg class={`w-5 h-5 transition-transform duration-300 ${index === 0 ? 'opacity-100' : 'opacity-0 group-hover:opacity-50 group-hover:translate-x-1'}`} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
          </button>
        ))}
      </div>

      <div class="lg:col-span-8 bg-gray-50 rounded-3xl border border-gray-100 p-8 lg:p-12 flex flex-col lg:flex-row items-center gap-10 min-h-[450px] relative overflow-hidden">
        
        <div class="absolute top-0 right-0 w-64 h-64 bg-[#B8E900]/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>

        <div class="flex-1 space-y-6 relative z-10 w-full animate-fade-in" id="content-area">
            <h3 class="text-3xl font-bold text-gray-900" id="tab-title">
                {products[0].title}
            </h3>
            
            <p class="text-gray-600 text-lg leading-relaxed" id="tab-desc">
                {products[0].description}
            </p>

            <div class="w-full h-px bg-gray-200 my-6"></div>

            <ul class="space-y-3" id="tab-features">
                {products[0].features.map(feature => (
                    <li class="flex items-start">
                        <div class="flex-shrink-0 w-5 h-5 rounded-full bg-[#B8E900] flex items-center justify-center mt-1 mr-3 text-black">
                            <svg class="w-3 h-3 font-bold" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <span class="text-gray-700 font-medium">{feature}</span>
                    </li>
                ))}
            </ul>
        </div>

        <div class="w-full lg:w-2/5 flex justify-center lg:justify-end relative z-10">
             <img 
                id="tab-image"
                src={products[0].image} 
                alt="Produto Nicopel" 
                class="w-full max-w-[280px] object-contain drop-shadow-xl transform transition-all duration-500 hover:scale-105"
             />
        </div>

      </div>
    </div>
  </div>
</section>

<script define:vars={{ products }}>
  const allProducts = products;

  window.openTab = (productId) => {
    
    // 1. Achar o produto
    const product = allProducts.find(p => p.id === productId);
    if (!product) return;

    // 2. Atualizar Estilos dos Botões (Design Clean)
    const buttons = document.querySelectorAll('.tab-btn');
    buttons.forEach(btn => {
        const icon = btn.querySelector('svg');

        if(btn.dataset.target === productId) {
            // Estilo Ativo (Verde)
            btn.className = 'tab-btn w-full text-left px-6 py-4 rounded-xl font-bold transition-all duration-300 flex items-center justify-between group bg-[#B8E900] text-black shadow-lg shadow-[#B8E900]/20 scale-[1.02]';
            if(icon) {
                icon.classList.remove('opacity-0');
                icon.classList.add('opacity-100');
            }
        } else {
            // Estilo Inativo (Cinza)
            btn.className = 'tab-btn w-full text-left px-6 py-4 rounded-xl font-bold transition-all duration-300 flex items-center justify-between group bg-gray-50 text-gray-600 hover:bg-gray-100 hover:text-black';
            if(icon) {
                icon.classList.remove('opacity-100');
                icon.classList.add('opacity-0');
            }
        }
    });

    // 3. Atualizar Conteúdo
    const titleEl = document.getElementById('tab-title');
    const descEl = document.getElementById('tab-desc');
    const featuresEl = document.getElementById('tab-features');
    const imgEl = document.getElementById('tab-image');
    const contentContainer = document.getElementById('content-area');

    // Fade Out
    contentContainer.style.opacity = '0';
    imgEl.style.opacity = '0';
    imgEl.style.transform = 'translateY(10px)';

    setTimeout(() => {
        // Troca dados
        titleEl.innerText = product.title;
        descEl.innerText = product.description;
        imgEl.src = product.image;

        featuresEl.innerHTML = product.features.map(feat => `
            <li class="flex items-start">
                <div class="flex-shrink-0 w-5 h-5 rounded-full bg-[#B8E900] flex items-center justify-center mt-1 mr-3 text-black">
                    <svg class="w-3 h-3 font-bold" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                    </svg>
                </div>
                <span class="text-gray-700 font-medium">${feat}</span>
            </li>
        `).join('');

        // Fade In
        contentContainer.style.opacity = '1';
        imgEl.style.opacity = '1';
        imgEl.style.transform = 'translateY(0)';
    }, 200);
  }
</script>